CREATE TABLE User
(
 UserID SERIAL,
 Username VARCHAR(60) NOT NULL,
 PasswordHash VARCHAR(64) NOT NULL,
 IsAdmin BIT(1) NOT NULL,
 PRIMARY KEY (UserID)
);

CREATE TABLE Transactions
(
 TransactionID SERIAL,
 BucketName VARCHAR(60) NOT NULL,
 IsExpense TINYINT(1) NOT NULL,
 Amount DECIMAL(10,2) NOT NULL,
 TransDate DATE NOT NULL,
 Description TEXT NOT NULL,
 UserID BIGINT UNSIGNED NOT NULL,
 PRIMARY KEY (TransactionID),
 FOREIGN KEY (UserID) REFERENCES User(UserID)
);

CREATE TABLE Buckets
(
 BucketID SERIAL,
 BucketName VARCHAR(60) NOT NULL,
 BucketDescription TEXT NOT NULL,
 BucketValue DECIMAL(10,2) NOT NULL,
 UserID BIGINT UNSIGNED NOT NULL,
 PRIMARY KEY (BucketID),
 FOREIGN KEY (UserID) REFERENCES User(UserID)
);

CREATE TABLE Budget
(
 TotalMonthlyAllocation DECIMAL(10,2) NOT NULL,
 BudgetID SERIAL,
 UserID BIGINT UNSIGNED NOT NULL,
 PRIMARY KEY (BudgetID),
 FOREIGN KEY (UserID) REFERENCES User(UserID)
);

CREATE TABLE Shared
(
 UserID_1 BIGINT UNSIGNED NOT NULL,
 SharedUserID_2 BIGINT UNSIGNED NOT NULL,
 PRIMARY KEY (UserID_1, SharedUserID_2),
 FOREIGN KEY (UserID_1) REFERENCES User(UserID),
 FOREIGN KEY (SharedUserID_2) REFERENCES User(UserID)
);
